<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1485px" preserveAspectRatio="none" style="width:2790px;height:1485px;background:#FFFFFF;" version="1.1" viewBox="0 0 2790 1485" width="2790px" zoomAndPan="magnify"><title>Invite Reviewer - Sequence Diagram (C4-L3)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="349.4326" x="1216.3027" y="27.9951">Invite Reviewer - Sequence Diagram (C4-L3)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="1349.7285" x="716.1548" y="1472.8857">This diagram illustrates the flow for handling an "Invite Reviewer" request in the Review Service, covering entity loading, validation, reviewer resolution, persistence, and notification via email.</text><rect fill="#E6F0FF" height="1414.5938" style="stroke:#181818;stroke-width:0.5;" width="724.3521" x="319.7661" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="236.6836" x="563.6003" y="65.5742">Application Layer</text><rect fill="#FFF0E0" height="1414.5938" style="stroke:#181818;stroke-width:0.5;" width="479.0137" x="1066.1182" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="186.5273" x="1212.3613" y="65.5742">Domain Layer</text><rect fill="#FFE0E0" height="1414.5938" style="stroke:#181818;stroke-width:0.5;" width="478.1885" x="1567.1318" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="241.4414" x="1685.5054" y="65.5742">Persistence Layer</text><rect fill="#E0F7FF" height="1414.5938" style="stroke:#181818;stroke-width:0.5;" width="704.7178" x="2067.3203" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="215.0977" x="2312.1304" y="65.5742">External &amp; Infra</text><g><title>InviteReviewerHandler</title><rect fill="#FFFFFF" height="1126.3125" style="stroke:#181818;stroke-width:1;" width="10" x="488.7363" y="222.6406"/></g><rect fill="none" height="71.875" style="stroke:#000000;stroke-width:1.5;" width="1450.7856" x="313.7661" y="475.3281"/><rect fill="none" height="369.3125" style="stroke:#000000;stroke-width:1.5;" width="2085.1431" x="303.7661" y="617.1406"/><rect fill="none" height="198.625" style="stroke:#000000;stroke-width:1.5;" width="2065.1431" x="313.7661" y="708.9531"/><g><title>Editor</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="39.5137" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="43" x2="43" y1="150.7656" y2="1366.9531"/></g><g><title>InviteReviewerHandler</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="489.7363" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="492.7661" x2="492.7661" y1="150.7656" y2="1366.9531"/></g><g><title>InviteReviewerValidator</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="858.6387" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="862.1592" x2="862.1592" y1="150.7656" y2="1366.9531"/></g><g><title>Article</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="1166.3149" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1170.1182" x2="1170.1182" y1="150.7656" y2="1366.9531"/></g><g><title>ReviewInvitation</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="1406.8218" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1410.5117" x2="1410.5117" y1="150.7656" y2="1366.9531"/></g><g><title>Repository</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="1658.8418" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1662.1318" x2="1662.1318" y1="150.7656" y2="1366.9531"/></g><g><title>ReviewDbContext</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="1898.936" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1902.5518" x2="1902.5518" y1="150.7656" y2="1366.9531"/></g><g><title>Auth.PersonService</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="2216.1147" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2219.3203" x2="2219.3203" y1="150.7656" y2="1366.9531"/></g><g><title>EmailService</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="2481.022" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2484.9092" x2="2484.9092" y1="150.7656" y2="1366.9531"/></g><g><title>UrlHelper</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="2680.5864" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2684.1348" x2="2684.1348" y1="150.7656" y2="1366.9531"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="71.0273" x="5" y="145.1055">Editor</text><ellipse cx="43.5137" cy="71.3281" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.5137,79.3281 L43.5137,106.3281 M30.5137,87.3281 L56.5137,87.3281 M43.5137,106.3281 L30.5137,121.3281 M43.5137,106.3281 L56.5137,121.3281" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="71.0273" x="5" y="1388.2305">Editor</text><ellipse cx="43.5137" cy="1402.3906" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.5137,1410.3906 L43.5137,1437.3906 M30.5137,1418.3906 L56.5137,1418.3906 M43.5137,1437.3906 L30.5137,1452.3906 M43.5137,1437.3906 L56.5137,1452.3906" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Handler"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="309.9404" x="338.7661" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="295.9404" x="345.7661" y="106.3682">InviteReviewerHandler</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="126.6357" x="430.4185" y="136.6338">(MediatR)</text></g><g class="participant participant-tail" data-participant="Handler"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="309.9404" x="338.7661" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="295.9404" x="345.7661" y="1397.0869">InviteReviewerHandler</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="126.6357" x="430.4185" y="1427.3525">(MediatR)</text></g><g class="participant participant-head" data-participant="Validator"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="324.959" x="700.1592" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="310.959" x="707.1592" y="106.3682">InviteReviewerValidator</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.0195" x="746.6289" y="136.6338">(FluentValidation)</text></g><g class="participant participant-tail" data-participant="Validator"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="324.959" x="700.1592" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="310.959" x="707.1592" y="1397.0869">InviteReviewerValidator</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.0195" x="746.6289" y="1427.3525">(FluentValidation)</text></g><g class="participant participant-head" data-participant="Article"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="170.3936" x="1085.1182" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="83.4082" x="1128.6108" y="106.3682">Article</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1092.1182" y="136.6338">(Aggregate)</text></g><g class="participant participant-tail" data-participant="Article"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="170.3936" x="1085.1182" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="83.4082" x="1128.6108" y="1397.0869">Article</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1092.1182" y="1427.3525">(Aggregate)</text></g><g class="participant participant-head" data-participant="Invitation"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="230.6201" x="1295.5117" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="216.6201" x="1302.5117" y="106.3682">ReviewInvitation</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1332.625" y="136.6338">(Aggregate)</text></g><g class="participant participant-tail" data-participant="Invitation"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="230.6201" x="1295.5117" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="216.6201" x="1302.5117" y="1397.0869">ReviewInvitation</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1332.625" y="1427.3525">(Aggregate)</text></g><g class="participant participant-head" data-participant="Repository"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="153.4199" x="1586.1318" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="139.4199" x="1593.1318" y="106.3682">Repository</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1602.501" y="136.6338">(EF Core)</text></g><g class="participant participant-tail" data-participant="Repository"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="153.4199" x="1586.1318" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="139.4199" x="1593.1318" y="1397.0869">Repository</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1602.501" y="1427.3525">(EF Core)</text></g><g class="participant participant-head" data-participant="DbContext"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="246.7686" x="1779.5518" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.7686" x="1786.5518" y="106.3682">ReviewDbContext</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1842.5952" y="136.6338">(EF Core)</text></g><g class="participant participant-tail" data-participant="DbContext"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="246.7686" x="1779.5518" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.7686" x="1786.5518" y="1397.0869">ReviewDbContext</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1842.5952" y="1427.3525">(EF Core)</text></g><g class="participant participant-head" data-participant="PersonSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="267.5889" x="2086.3203" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="253.5889" x="2093.3203" y="106.3682">Auth.PersonService</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="88.6895" x="2175.77" y="136.6338">(gRPC)</text></g><g class="participant participant-tail" data-participant="PersonSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="267.5889" x="2086.3203" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="253.5889" x="2093.3203" y="1397.0869">Auth.PersonService</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="88.6895" x="2175.77" y="1427.3525">(gRPC)</text></g><g class="participant participant-head" data-participant="EmailSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="182.2256" x="2393.9092" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="168.2256" x="2400.9092" y="106.3682">EmailService</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="114.8291" x="2427.6074" y="136.6338">(Module)</text></g><g class="participant participant-tail" data-participant="EmailSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="182.2256" x="2393.9092" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="168.2256" x="2400.9092" y="1397.0869">EmailService</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="114.8291" x="2427.6074" y="1427.3525">(Module)</text></g><g class="participant participant-head" data-participant="UrlHelper"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="136.9033" x="2616.1348" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="122.9033" x="2623.1348" y="106.3682">UrlHelper</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="96.7637" x="2636.2046" y="136.6338">(Utility)</text></g><g class="participant participant-tail" data-participant="UrlHelper"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="136.9033" x="2616.1348" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="122.9033" x="2623.1348" y="1397.0869">UrlHelper</text><text fill="#38363B" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="96.7637" x="2636.2046" y="1427.3525">(Utility)</text></g><g><title>InviteReviewerHandler</title><rect fill="#FFFFFF" height="1126.3125" style="stroke:#181818;stroke-width:1;" width="10" x="488.7363" y="222.6406"/></g><g class="message" data-participant-1="Client" data-participant-2="Handler"><polygon fill="#181818" points="476.7363,218.6406,486.7363,222.6406,476.7363,226.6406,480.7363,222.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="43.5137" x2="482.7363" y1="222.6406" y2="222.6406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="302.0273" x="50.5137" y="187.043">InviteReviewerCommand</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="426.2227" x="50.5137" y="214.9805">(ArticleId, UserId?, Email?, EditorId)</text></g><g class="message" data-participant-1="Handler" data-participant-2="Validator"><polygon fill="#181818" points="850.6387,260.5781,860.6387,264.5781,850.6387,268.5781,854.6387,264.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="856.6387" y1="264.5781" y2="264.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="339.9023" x="505.7363" y="256.918">ValidateOrThrow(command)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2783.0381" x="0" y="299.5469"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="299.5469" y2="299.5469"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="302.5469" y2="302.5469"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="303.9453" x="1239.5464" y="282.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="281.5898" x="1245.5464" y="308.8555">Load Article &amp; Editor</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1650.8418,358.4531,1660.8418,362.4531,1650.8418,366.4531,1654.8418,362.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1656.8418" y1="362.4531" y2="362.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="391.875" x="505.7363" y="354.793">GetArticleByIdOrThrow(articleId)</text></g><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1650.8418,400.3906,1660.8418,404.3906,1650.8418,408.3906,1654.8418,404.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1656.8418" y1="404.3906" y2="404.3906"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="435.9609" x="505.7363" y="396.7305">GetEditorByUserIdOrThrow(editorId)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2783.0381" x="0" y="439.3594"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="439.3594" y2="439.3594"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="442.3594" y2="442.3594"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="449.1406" x="1166.9487" y="422.3906"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="426.7852" x="1172.9487" y="448.668">Guard: Existing Open Invitation</text><path d="M313.7661,475.3281 L595.9185,475.3281 L595.9185,495.2656 L585.9185,505.2656 L313.7661,505.2656 L313.7661,475.3281" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="71.875" style="stroke:#000000;stroke-width:1.5;" width="1450.7856" x="313.7661" y="475.3281"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="237.1523" x="328.7661" y="498.6055">if Open Invitation</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1650.8418,535.2031,1660.8418,539.2031,1650.8418,543.2031,1654.8418,539.2031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1656.8418" y1="539.2031" y2="539.2031"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="519.6445" x="505.7363" y="531.543">OpenInvitationExistsAsync(userId?, email?)</text><text fill="#888888" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="96.5391" x="1033.0098" y="531.543">&#8594; throw</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2783.0381" x="0" y="581.1719"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="581.1719" y2="581.1719"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="584.1719" y2="584.1719"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="261.582" x="1260.728" y="564.2031"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="239.2266" x="1266.728" y="590.4805">Resolve Reviewer</text><path d="M303.7661,617.1406 L384.145,617.1406 L384.145,637.0781 L374.145,647.0781 L303.7661,647.0781 L303.7661,617.1406" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="369.3125" style="stroke:#000000;stroke-width:1.5;" width="2085.1431" x="303.7661" y="617.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="18.668" x="318.7661" y="640.418">if</text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="454.9102" x="399.145" y="641.418">[Reviewer is User (UserId exists)]</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1650.8418,689.9531,1660.8418,693.9531,1650.8418,697.9531,1654.8418,693.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1656.8418" y1="693.9531" y2="693.9531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="426.7148" x="505.7363" y="686.293">GetReviewerByUserIdAsync(userId)</text><text fill="#888888" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="132.2695" x="940.0801" y="686.293">&#8594; reviewer</text></g><path d="M313.7661,708.9531 L385.7896,708.9531 L385.7896,728.8906 L375.7896,738.8906 L313.7661,738.8906 L313.7661,708.9531" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="198.625" style="stroke:#000000;stroke-width:1.5;" width="2065.1431" x="313.7661" y="708.9531"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="18.668" x="328.7661" y="732.2305">if</text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="235.5117" x="400.7896" y="733.2305">[Reviewer exists]</text><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1158.3149,781.7656,1168.3149,785.7656,1158.3149,789.7656,1162.3149,785.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1164.3149" y1="785.7656" y2="785.7656"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="301.9336" x="505.7363" y="778.1055">InviteReviewer(reviewer)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="313.7661" x2="2378.9092" y1="794.7656" y2="794.7656"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="287.168" x="318.7661" y="817.043">[Reviewer not found]</text><g class="message" data-participant-1="Handler" data-participant-2="PersonSvc"><polygon fill="#181818" points="2208.1147,853.6406,2218.1147,857.6406,2208.1147,861.6406,2212.1147,857.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="2214.1147" y1="857.6406" y2="857.6406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="396.8789" x="505.7363" y="849.9805">GetPersonByUserIdAsync(userId)</text><text fill="#888888" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="155.4258" x="910.2441" y="849.9805">&#8594; personInfo</text></g><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1158.3149,895.5781,1168.3149,899.5781,1158.3149,903.5781,1162.3149,899.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1164.3149" y1="899.5781" y2="899.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="325.0898" x="505.7363" y="891.918">InviteReviewer(personInfo)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="303.7661" x2="2388.9092" y1="915.5781" y2="915.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="301.6406" x="308.7661" y="937.8555">[Reviewer is not User]</text><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1158.3149,974.4531,1168.3149,978.4531,1158.3149,982.4531,1162.3149,978.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1164.3149" y1="978.4531" y2="978.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="263.5898" x="505.7363" y="970.793">InviteReviewer(email)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2783.0381" x="0" y="1020.4219"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="1020.4219" y2="1020.4219"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="1023.4219" y2="1023.4219"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="238.2617" x="1272.3882" y="1003.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="215.9063" x="1278.3882" y="1029.7305">Notify Reviewer</text><g class="message" data-participant-1="Handler" data-participant-2="UrlHelper"><polygon fill="#181818" points="2672.5864,1079.3281,2682.5864,1083.3281,2672.5864,1087.3281,2676.5864,1083.3281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="2678.5864" y1="1083.3281" y2="1083.3281"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="462.457" x="505.7363" y="1075.668">BuildConfirmationUrl(invitation.Token)</text><text fill="#888888" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="213.9727" x="975.8223" y="1075.668">&#8594; confirmationUrl</text></g><g class="message" data-participant-1="Handler" data-participant-2="EmailSvc"><polygon fill="#181818" points="2473.022,1121.2656,2483.022,1125.2656,2473.022,1129.2656,2477.022,1125.2656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="2479.022" y1="1125.2656" y2="1125.2656"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="594.0234" x="505.7363" y="1117.6055">SendEmailAsync(EmailMessage(confirmationUrl))</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2783.0381" x="0" y="1160.2344"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="1160.2344" y2="1160.2344"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="1163.2344" y2="1163.2344"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="116.3281" x="1333.355" y="1143.2656"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="93.9727" x="1339.355" y="1169.543">Persist</text><g class="message" data-participant-1="Handler" data-participant-2="DbContext"><polygon fill="#181818" points="1890.936,1219.1406,1900.936,1223.1406,1890.936,1227.1406,1894.936,1223.1406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1896.936" y1="1223.1406" y2="1223.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="253.5586" x="505.7363" y="1215.4805">SaveChangesAsync()</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2783.0381" x="0" y="1258.1094"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="1258.1094" y2="1258.1094"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2783.0381" y1="1261.1094" y2="1261.1094"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="152.7148" x="1315.1616" y="1241.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="130.3594" x="1321.1616" y="1267.418">Response</text><g class="message" data-participant-1="Handler" data-participant-2="Client"><polygon fill="#181818" points="54.5137,1344.9531,44.5137,1348.9531,54.5137,1352.9531,50.5137,1348.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="48.5137" x2="492.7363" y1="1348.9531" y2="1348.9531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="295.0195" x="60.5137" y="1313.3555">InviteReviewerResponse</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="357.3281" x="60.5137" y="1341.293">(ArticleId, InvitationId, Token)</text></g><!--SRC=[ZLRTJkD65BxtKvmDqX9BWRBBbguYO4L2p4Q2BWgmLTNjnM2VX173Z3kUXAHLR_i0VSG-ISzuFFROfDi52UoPSxxlEpzpngyod7E9S7LtEpdlhsCuJfLGUhZpllmvNHz_LowSHgygoulPsS-XuU7xmwF3-y0mAXwvp9bcJt2ESxOK9b7ItF3V4Tw-2pRfh-4fpvaqy4S4q5WTqTk8fOyBhPOo6rjO-Ec16xJhIcUetTf8a57qPu1vtM1UiopZSW5llW_sHsfThn-4w_TgxP1l7tZwAB4euCrst8wmu-CRr2kUukafx2HlxMyK6Mu4mbIkI3FCSCNn6JNimGt-jaIP8fnpjh2u_V6xlSl3E4fPRhYIGEm5PDKc5s9P6CqC5c0U4EP2FSESudvWCXCs1YQXrs7fWROaXG4kIo-t0PNA0QHgXTeweoIP6n2AsNmCOCK4pvYLCI2CIhF6GecbMynH5xmmDe01KMSWbU5pdfO-iE8Cy8bniHz5B3KaSomuSG0he3V9EAtqeeZo33quotFX_IxPXdXwi3CvIWwIX4eSDiP76ohjMn0NgG-qslaYouRiNo6bpSpYkDT1-Ep2KjimwZsFaWYgZ_bSPyB28KLAihtsSqL11hAJ93cO77H8p-mZjO2bh9uznTbYeN51HNqfjHJdic8TdSfcSIj2HzrrKwDGukIbn1dcgh1LsLHa_jNJJ18OAxr5vldzc8ughasWibxRujsHE5aRr989U4q1ppKhQt-G_F2YzZOM9MzMgKlZqZpiLqkkbptLOdOzVgboOdlHExkNjjkLofPYItXtMdn4aLTDLxzvjpl31PsRLc1Lf- -TrlqwX7QdZTNJ4srzaVsg7QRP0EuArDFimy1fjV_BOpBDOdk2-8fAx06Zo2CJITFIG_-CdsXoQVNSJnrH74Kd9t19PxlknTSLF9oSX6117mpX0arbFjfCCu_9lEJuQuuEVRHnKNbVh4EoWYwMJ6T3QW7gKJk3FkKemxOdQNQsvi3dtRt_fBPsZLa9NPmL6vdsbpw_vLpw45Utt3z__KsJaSJ5je9HjCk4SSfWJdR549Ibvi5f51fPjW4imQbVTcinfAQgFeMbDTs8BxmhhzsIZ98mipDr5LmCOTJmIxrCLu7D9VHTHYkS-5VY_qePlBilH9YAC0D-nCS4LxCtv8xCShNOV3Dr-xiVmg4eWkZebg1RY-xBBbPplalXxlN_PEUb5GqE5N-pjhQFBKDR8INQYhJ4qRSXbWqLG-HB-gEz2JUjYWOmpKGPmcZ91Nqvo3dNJsLxq6Q_QPRzM_M8CWmuRTksZc0zuuPqlykiV7M9An-lw3E6BR3VXN1diRegEbgRuKwOR8LZ-jXOO7MWoB5gu5n9oc3e6Xw4ThQyUNluDKVMlhcmemoxW-zV]--></g></svg>