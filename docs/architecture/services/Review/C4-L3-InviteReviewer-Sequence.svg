<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1485px" preserveAspectRatio="none" style="width:2865px;height:1485px;background:#FFFFFF;" version="1.1" viewBox="0 0 2865 1485" width="2865px" zoomAndPan="magnify"><title>Invite Reviewer - Sequence Diagram (C4-L3)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="349.4326" x="1253.8027" y="27.9951">Invite Reviewer - Sequence Diagram (C4-L3)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="1349.7285" x="753.6548" y="1472.8857">This diagram illustrates the flow for handling an "Invite Reviewer" request in the Review Service, covering entity loading, validation, reviewer resolution, persistence, and notification via email.</text><rect fill="#E6F0FF" height="1414.5938" style="stroke:#181818;stroke-width:0.5;" width="734.3521" x="314.7661" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="236.6836" x="563.6003" y="65.5742">Application Layer</text><rect fill="#FFF0E0" height="1414.5938" style="stroke:#181818;stroke-width:0.5;" width="499.0137" x="1071.1182" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="186.5273" x="1227.3613" y="65.5742">Domain Layer</text><rect fill="#FFE0E0" height="1414.5938" style="stroke:#181818;stroke-width:0.5;" width="498.1885" x="1592.1318" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="241.4414" x="1720.5054" y="65.5742">Persistence Layer</text><rect fill="#E0F7FF" height="1414.5938" style="stroke:#181818;stroke-width:0.5;" width="734.7178" x="2112.3203" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="215.0977" x="2372.1304" y="65.5742">External &amp; Infra</text><g><title>InviteReviewerHandler</title><rect fill="#FFFFFF" height="1126.3125" style="stroke:#181818;stroke-width:1;" width="10" x="488.7363" y="222.6406"/></g><rect fill="none" height="71.875" style="stroke:#666666;stroke-width:1.5;" width="1490.7856" x="308.7661" y="475.3281"/><rect fill="none" height="369.3125" style="stroke:#666666;stroke-width:1.5;" width="2145.1431" x="298.7661" y="617.1406"/><rect fill="none" height="198.625" style="stroke:#666666;stroke-width:1.5;" width="2125.1431" x="308.7661" y="708.9531"/><g><title>Editor</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="39.5137" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="43" x2="43" y1="150.7656" y2="1366.9531"/></g><g><title>InviteReviewerHandler</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="489.7363" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="492.7661" x2="492.7661" y1="150.7656" y2="1366.9531"/></g><g><title>InviteReviewerValidator</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="858.6387" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="862.1592" x2="862.1592" y1="150.7656" y2="1366.9531"/></g><g><title>Article</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="1176.3149" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1180.1182" x2="1180.1182" y1="150.7656" y2="1366.9531"/></g><g><title>ReviewInvitation</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="1426.8218" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1430.5117" x2="1430.5117" y1="150.7656" y2="1366.9531"/></g><g><title>Repository</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="1688.8418" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1692.1318" x2="1692.1318" y1="150.7656" y2="1366.9531"/></g><g><title>ReviewDbContext</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="1938.936" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1942.5518" x2="1942.5518" y1="150.7656" y2="1366.9531"/></g><g><title>Auth.PersonService</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="2266.1147" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2269.3203" x2="2269.3203" y1="150.7656" y2="1366.9531"/></g><g><title>EmailService</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="2541.022" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2544.9092" x2="2544.9092" y1="150.7656" y2="1366.9531"/></g><g><title>UrlHelper</title><rect fill="#000000" fill-opacity="0.00000" height="1216.1875" width="8" x="2750.5864" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2754.1348" x2="2754.1348" y1="150.7656" y2="1366.9531"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="71.0273" x="5" y="145.1055">Editor</text><ellipse cx="43.5137" cy="71.3281" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.5137,79.3281 L43.5137,106.3281 M30.5137,87.3281 L56.5137,87.3281 M43.5137,106.3281 L30.5137,121.3281 M43.5137,106.3281 L56.5137,121.3281" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="71.0273" x="5" y="1388.2305">Editor</text><ellipse cx="43.5137" cy="1402.3906" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.5137,1410.3906 L43.5137,1437.3906 M30.5137,1418.3906 L56.5137,1418.3906 M43.5137,1437.3906 L30.5137,1452.3906 M43.5137,1437.3906 L56.5137,1452.3906" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Handler"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="309.9404" x="338.7661" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="295.9404" x="345.7661" y="106.3682">InviteReviewerHandler</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="126.6357" x="430.4185" y="136.6338">(MediatR)</text></g><g class="participant participant-tail" data-participant="Handler"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="309.9404" x="338.7661" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="295.9404" x="345.7661" y="1397.0869">InviteReviewerHandler</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="126.6357" x="430.4185" y="1427.3525">(MediatR)</text></g><g class="participant participant-head" data-participant="Validator"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="324.959" x="700.1592" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="310.959" x="707.1592" y="106.3682">InviteReviewerValidator</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.0195" x="746.6289" y="136.6338">(FluentValidation)</text></g><g class="participant participant-tail" data-participant="Validator"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="324.959" x="700.1592" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="310.959" x="707.1592" y="1397.0869">InviteReviewerValidator</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.0195" x="746.6289" y="1427.3525">(FluentValidation)</text></g><g class="participant participant-head" data-participant="Article"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="170.3936" x="1095.1182" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="83.4082" x="1138.6108" y="106.3682">Article</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1102.1182" y="136.6338">(Aggregate)</text></g><g class="participant participant-tail" data-participant="Article"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="170.3936" x="1095.1182" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="83.4082" x="1138.6108" y="1397.0869">Article</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1102.1182" y="1427.3525">(Aggregate)</text></g><g class="participant participant-head" data-participant="Invitation"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="230.6201" x="1315.5117" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="216.6201" x="1322.5117" y="106.3682">ReviewInvitation</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1352.625" y="136.6338">(Aggregate)</text></g><g class="participant participant-tail" data-participant="Invitation"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="230.6201" x="1315.5117" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="216.6201" x="1322.5117" y="1397.0869">ReviewInvitation</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1352.625" y="1427.3525">(Aggregate)</text></g><g class="participant participant-head" data-participant="Repository"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="153.4199" x="1616.1318" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="139.4199" x="1623.1318" y="106.3682">Repository</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1632.501" y="136.6338">(EF Core)</text></g><g class="participant participant-tail" data-participant="Repository"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="153.4199" x="1616.1318" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="139.4199" x="1623.1318" y="1397.0869">Repository</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1632.501" y="1427.3525">(EF Core)</text></g><g class="participant participant-head" data-participant="DbContext"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="246.7686" x="1819.5518" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.7686" x="1826.5518" y="106.3682">ReviewDbContext</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1882.5952" y="136.6338">(EF Core)</text></g><g class="participant participant-tail" data-participant="DbContext"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="246.7686" x="1819.5518" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.7686" x="1826.5518" y="1397.0869">ReviewDbContext</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1882.5952" y="1427.3525">(EF Core)</text></g><g class="participant participant-head" data-participant="PersonSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="267.5889" x="2136.3203" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="253.5889" x="2143.3203" y="106.3682">Auth.PersonService</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="88.6895" x="2225.77" y="136.6338">(gRPC)</text></g><g class="participant participant-tail" data-participant="PersonSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="267.5889" x="2136.3203" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="253.5889" x="2143.3203" y="1397.0869">Auth.PersonService</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="88.6895" x="2225.77" y="1427.3525">(gRPC)</text></g><g class="participant participant-head" data-participant="EmailSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="182.2256" x="2453.9092" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="168.2256" x="2460.9092" y="106.3682">EmailService</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="114.8291" x="2487.6074" y="136.6338">(Module)</text></g><g class="participant participant-tail" data-participant="EmailSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="182.2256" x="2453.9092" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="168.2256" x="2460.9092" y="1397.0869">EmailService</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="114.8291" x="2487.6074" y="1427.3525">(Module)</text></g><g class="participant participant-head" data-participant="UrlHelper"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="136.9033" x="2686.1348" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="122.9033" x="2693.1348" y="106.3682">UrlHelper</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="96.7637" x="2706.2046" y="136.6338">(Utility)</text></g><g class="participant participant-tail" data-participant="UrlHelper"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="136.9033" x="2686.1348" y="1365.9531"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="122.9033" x="2693.1348" y="1397.0869">UrlHelper</text><text fill="#505050" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="96.7637" x="2706.2046" y="1427.3525">(Utility)</text></g><g><title>InviteReviewerHandler</title><rect fill="#FFFFFF" height="1126.3125" style="stroke:#181818;stroke-width:1;" width="10" x="488.7363" y="222.6406"/></g><g class="message" data-participant-1="Client" data-participant-2="Handler"><polygon fill="#181818" points="476.7363,218.6406,486.7363,222.6406,476.7363,226.6406,480.7363,222.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="43.5137" x2="482.7363" y1="222.6406" y2="222.6406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="302.0273" x="50.5137" y="187.043">InviteReviewerCommand</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="426.2227" x="50.5137" y="214.9805">(ArticleId, UserId?, Email?, EditorId)</text></g><g class="message" data-participant-1="Handler" data-participant-2="Validator"><polygon fill="#181818" points="850.6387,260.5781,860.6387,264.5781,850.6387,268.5781,854.6387,264.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="856.6387" y1="264.5781" y2="264.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="339.9023" x="505.7363" y="256.918">ValidateOrThrow(command)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2858.0381" x="0" y="299.5469"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="299.5469" y2="299.5469"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="302.5469" y2="302.5469"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="303.9453" x="1277.0464" y="282.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="281.5898" x="1283.0464" y="308.8555">Load Article &amp; Editor</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1680.8418,358.4531,1690.8418,362.4531,1680.8418,366.4531,1684.8418,362.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1686.8418" y1="362.4531" y2="362.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="391.875" x="505.7363" y="354.793">GetArticleByIdOrThrow(articleId)</text></g><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1680.8418,400.3906,1690.8418,404.3906,1680.8418,408.3906,1684.8418,404.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1686.8418" y1="404.3906" y2="404.3906"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="435.9609" x="505.7363" y="396.7305">GetEditorByUserIdOrThrow(editorId)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2858.0381" x="0" y="439.3594"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="439.3594" y2="439.3594"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="442.3594" y2="442.3594"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="449.1406" x="1204.4487" y="422.3906"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="426.7852" x="1210.4487" y="448.668">Guard: Existing Open Invitation</text><path d="M308.7661,475.3281 L590.9185,475.3281 L590.9185,495.2656 L580.9185,505.2656 L308.7661,505.2656 L308.7661,475.3281" fill="#EAEAEA" style="stroke:#666666;stroke-width:1.5;"/><rect fill="none" height="71.875" style="stroke:#666666;stroke-width:1.5;" width="1490.7856" x="308.7661" y="475.3281"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="237.1523" x="323.7661" y="498.6055">if Open Invitation</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1680.8418,535.2031,1690.8418,539.2031,1680.8418,543.2031,1684.8418,539.2031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1686.8418" y1="539.2031" y2="539.2031"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="519.6445" x="505.7363" y="531.543">OpenInvitationExistsAsync(userId?, email?)</text><text fill="#888888" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="96.5391" x="1033.0098" y="531.543">&#8594; throw</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2858.0381" x="0" y="581.1719"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="581.1719" y2="581.1719"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="584.1719" y2="584.1719"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="261.582" x="1298.228" y="564.2031"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="239.2266" x="1304.228" y="590.4805">Resolve Reviewer</text><path d="M298.7661,617.1406 L379.145,617.1406 L379.145,637.0781 L369.145,647.0781 L298.7661,647.0781 L298.7661,617.1406" fill="#EAEAEA" style="stroke:#666666;stroke-width:1.5;"/><rect fill="none" height="369.3125" style="stroke:#666666;stroke-width:1.5;" width="2145.1431" x="298.7661" y="617.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="18.668" x="313.7661" y="640.418">if</text><text fill="#222222" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="454.9102" x="394.145" y="641.418">[Reviewer is User (UserId exists)]</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1680.8418,689.9531,1690.8418,693.9531,1680.8418,697.9531,1684.8418,693.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1686.8418" y1="693.9531" y2="693.9531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="426.7148" x="505.7363" y="686.293">GetReviewerByUserIdAsync(userId)</text><text fill="#888888" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="132.2695" x="940.0801" y="686.293">&#8594; reviewer</text></g><path d="M308.7661,708.9531 L380.7896,708.9531 L380.7896,728.8906 L370.7896,738.8906 L308.7661,738.8906 L308.7661,708.9531" fill="#EAEAEA" style="stroke:#666666;stroke-width:1.5;"/><rect fill="none" height="198.625" style="stroke:#666666;stroke-width:1.5;" width="2125.1431" x="308.7661" y="708.9531"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="18.668" x="323.7661" y="732.2305">if</text><text fill="#222222" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="235.5117" x="395.7896" y="733.2305">[Reviewer exists]</text><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1168.3149,781.7656,1178.3149,785.7656,1168.3149,789.7656,1172.3149,785.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1174.3149" y1="785.7656" y2="785.7656"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="301.9336" x="505.7363" y="778.1055">InviteReviewer(reviewer)</text></g><line style="stroke:#666666;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.7661" x2="2433.9092" y1="794.7656" y2="794.7656"/><text fill="#222222" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="287.168" x="313.7661" y="817.043">[Reviewer not found]</text><g class="message" data-participant-1="Handler" data-participant-2="PersonSvc"><polygon fill="#181818" points="2258.1147,853.6406,2268.1147,857.6406,2258.1147,861.6406,2262.1147,857.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="2264.1147" y1="857.6406" y2="857.6406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="396.8789" x="505.7363" y="849.9805">GetPersonByUserIdAsync(userId)</text><text fill="#888888" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="155.4258" x="910.2441" y="849.9805">&#8594; personInfo</text></g><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1168.3149,895.5781,1178.3149,899.5781,1168.3149,903.5781,1172.3149,899.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1174.3149" y1="899.5781" y2="899.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="325.0898" x="505.7363" y="891.918">InviteReviewer(personInfo)</text></g><line style="stroke:#666666;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="298.7661" x2="2443.9092" y1="915.5781" y2="915.5781"/><text fill="#222222" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="301.6406" x="303.7661" y="937.8555">[Reviewer is not User]</text><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1168.3149,974.4531,1178.3149,978.4531,1168.3149,982.4531,1172.3149,978.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1174.3149" y1="978.4531" y2="978.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="263.5898" x="505.7363" y="970.793">InviteReviewer(email)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2858.0381" x="0" y="1020.4219"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="1020.4219" y2="1020.4219"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="1023.4219" y2="1023.4219"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="238.2617" x="1309.8882" y="1003.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="215.9063" x="1315.8882" y="1029.7305">Notify Reviewer</text><g class="message" data-participant-1="Handler" data-participant-2="UrlHelper"><polygon fill="#181818" points="2742.5864,1079.3281,2752.5864,1083.3281,2742.5864,1087.3281,2746.5864,1083.3281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="2748.5864" y1="1083.3281" y2="1083.3281"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="462.457" x="505.7363" y="1075.668">BuildConfirmationUrl(invitation.Token)</text><text fill="#888888" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="213.9727" x="975.8223" y="1075.668">&#8594; confirmationUrl</text></g><g class="message" data-participant-1="Handler" data-participant-2="EmailSvc"><polygon fill="#181818" points="2533.022,1121.2656,2543.022,1125.2656,2533.022,1129.2656,2537.022,1125.2656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="2539.022" y1="1125.2656" y2="1125.2656"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="594.0234" x="505.7363" y="1117.6055">SendEmailAsync(EmailMessage(confirmationUrl))</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2858.0381" x="0" y="1160.2344"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="1160.2344" y2="1160.2344"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="1163.2344" y2="1163.2344"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="116.3281" x="1370.855" y="1143.2656"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="93.9727" x="1376.855" y="1169.543">Persist</text><g class="message" data-participant-1="Handler" data-participant-2="DbContext"><polygon fill="#181818" points="1930.936,1219.1406,1940.936,1223.1406,1930.936,1227.1406,1934.936,1223.1406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="498.7363" x2="1936.936" y1="1223.1406" y2="1223.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="253.5586" x="505.7363" y="1215.4805">SaveChangesAsync()</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2858.0381" x="0" y="1258.1094"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="1258.1094" y2="1258.1094"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2858.0381" y1="1261.1094" y2="1261.1094"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="152.7148" x="1352.6616" y="1241.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="130.3594" x="1358.6616" y="1267.418">Response</text><g class="message" data-participant-1="Handler" data-participant-2="Client"><polygon fill="#181818" points="54.5137,1344.9531,44.5137,1348.9531,54.5137,1352.9531,50.5137,1348.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="48.5137" x2="492.7363" y1="1348.9531" y2="1348.9531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="295.0195" x="60.5137" y="1313.3555">InviteReviewerResponse</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="357.3281" x="60.5137" y="1341.293">(ArticleId, InvitationId, Token)</text></g><!--SRC=[ZLRlRjis4F-kfxWwG6C1JkPcNJOOIGhRiLC3oHeuIOTXtGTMEZj465AbQCVUiAzxW3tYdcH7KPGenUbg0Ob8tltkTt-fLoakk4IukhkTd7StCPmaIYWzsFkf-9rjJhuhDiwYLwNanNpuQoZuGzy-WM2KFt2PCSqUuHmNR2NCL4bpm_z0E7eR7D9VmnEUCMdWpmYWbZgcrOWb3qkjLZ8TMrZuvPuRjFjAfwZTtaYGKFHNW7bTOrwpDELo2KVzu7oaDdx_JMF_izeuvDjxdZn8p7DuinktHUpav0RrcYTuTWPxqoFxX16umIyhb0bUa4RMzcblChJFY-A1gtl7nUybKHkxKl2e-4MHuKOWpEIQuWPpN7DyGWq7bHwSSxQqGDtnsuFBx-CeOPdXIW9588UqFEH2h7AZcS4Sp3t2GgWdM92TUoPJOUF897HQLZgWhP7S09U5bZk0Cb8zIDGQjLL6IJIt81IpEUd1cWcUCakZHnWbPusv4YktcQ7EUMwi0pqodO9KXYzuKkZ0cZF0HyR5OHInn13DiU1a0rWEdKdAQQSJHPHhwC0mouJNksHRijEXX1nF-zCfbLbOdE-jgtHkGPodtj7ov9Cicg9xXHGsCu_ZJWlXetDBxSAepZpAL51-pCSg4XOEoLEYxRcVAt8oe3sTJlkJVileqBvI2LYJvRitCLmkDIufgS-f5kHSLAoYOrblxaHeiRkkSnHId3odECTCvJOhszAONtepaocCbTv1y_ppc4eUDoPWMUtjq6vHd6mCQia4l2Q75veLkUzFVtoMU-kBaZVhn8LnPUuFoorNozxKSduzVivoOclHAxj5K-rAfIknmxqxBTwZoCgYgrPUxSvmGNtJSAoiz8Epgbu7qAoqiNfyfADFibkMmopjmLsEUfQ-wpckzd_H9hCqjXt4rvHY3nX57fcCr2KzyE_uWQQdLa_Tn1cAe-Zq52wfjwjQV5t2m-bf21RKmG0kq9JYe-qizPZCKuw_fkZGHrldbTV5oYLBw6B5T3gW4g0QjJFeGuOoB7kYPeTq1dpHFdlHj9MhnGheV9XlPT9T-VWMS-bTNDwq__xz3qr68XVR34RHFXF6COC5oUK3KDOq3xfHQ6Jf5h00fthPhyWGcpBxv9RMT2i_qowrzWjZ58IvdQdhu688lORVgcsw2cmieUiYMkB4lvFzhwJ1g_j4XA488-17V4nmbVNQk3DcRJMi-M9grtStX4EH1zxHBK6t5bsyRQowlmlYRlb_jBD2YWQ7Yh-PMrF7fg79a09jILh3qRSX5WKLG-HJ-hEz2RUDZ0OmzKGPm6Z51Ns2o0NNZqLvq66tBfR3M_M0CdGuQSesMh2QSGEwtsLQB5tWYjSh-fHYI-os8LmlbbT5Ysizt0cJhN5C7njBB1kA5Ci2pfIa28QgOICqe-N5cyElRbcxScv7ARO7tty0]--></g></svg>