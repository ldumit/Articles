<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1540px" preserveAspectRatio="none" style="width:3024px;height:1540px;background:#FFFFFF;" version="1.1" viewBox="0 0 3024 1540" width="3024px" zoomAndPan="magnify"><title>Invite Reviewer - Sequence Diagram (C4-L3)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="349.4326" x="1333.5764" y="27.9951">Invite Reviewer - Sequence Diagram (C4-L3)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="1349.7285" x="833.4285" y="1527.7607">This diagram illustrates the flow for handling an "Invite Reviewer" request in the Review Service, covering entity loading, validation, reviewer resolution, persistence, and notification via email.</text><rect fill="#E6F0FF" height="1469.4688" style="stroke:#181818;stroke-width:0.5;" width="768.8994" x="320.7661" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="236.6836" x="586.874" y="65.5742">Application Layer</text><rect fill="#FFF0E0" height="1469.4688" style="stroke:#181818;stroke-width:0.5;" width="535.0137" x="1109.6655" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="186.5273" x="1283.9087" y="65.5742">Domain Layer</text><rect fill="#FFE0E0" height="1469.4688" style="stroke:#181818;stroke-width:0.5;" width="534.1885" x="1664.6792" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="241.4414" x="1811.0527" y="65.5742">Persistence Layer</text><rect fill="#E0F7FF" height="1469.4688" style="stroke:#181818;stroke-width:0.5;" width="788.7178" x="2218.8677" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="215.0977" x="2505.6777" y="65.5742">External &amp; Infra</text><g><title>InviteReviewerHandler</title><rect fill="#FFFFFF" height="1181.1875" style="stroke:#181818;stroke-width:1;" width="10" x="503.7363" y="222.6406"/></g><rect fill="none" height="84.8125" style="stroke:#000000;stroke-width:1.5;" width="692.7065" x="10" y="517.2656"/><rect fill="none" height="369.3125" style="stroke:#000000;stroke-width:1.5;" width="2263.6904" x="304.7661" y="672.0156"/><rect fill="none" height="198.625" style="stroke:#000000;stroke-width:1.5;" width="2243.6904" x="314.7661" y="763.8281"/><g><title>Editor</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="54.5137" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="150.7656" y2="1421.8281"/></g><g><title>InviteReviewerHandler</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="504.7363" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="507.7661" x2="507.7661" y1="150.7656" y2="1421.8281"/></g><g><title>InviteReviewerValidator</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="890.186" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="893.7065" x2="893.7065" y1="150.7656" y2="1421.8281"/></g><g><title>Article</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="1223.8623" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1227.6655" x2="1227.6655" y1="150.7656" y2="1421.8281"/></g><g><title>ReviewInvitation</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="1492.3691" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1496.0591" x2="1496.0591" y1="150.7656" y2="1421.8281"/></g><g><title>Repository</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="1770.3892" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1773.6792" x2="1773.6792" y1="150.7656" y2="1421.8281"/></g><g><title>ReviewDbContext</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="2038.4834" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2042.0991" x2="2042.0991" y1="150.7656" y2="1421.8281"/></g><g><title>Auth.PersonService</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="2381.6621" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2384.8677" x2="2384.8677" y1="150.7656" y2="1421.8281"/></g><g><title>EmailService</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="2674.5693" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2678.4565" x2="2678.4565" y1="150.7656" y2="1421.8281"/></g><g><title>UrlHelper</title><rect fill="#000000" fill-opacity="0.00000" height="1271.0625" width="8" x="2902.1338" y="150.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2905.6821" x2="2905.6821" y1="150.7656" y2="1421.8281"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="71.0273" x="20" y="145.1055">Editor</text><ellipse cx="58.5137" cy="71.3281" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M58.5137,79.3281 L58.5137,106.3281 M45.5137,87.3281 L71.5137,87.3281 M58.5137,106.3281 L45.5137,121.3281 M58.5137,106.3281 L71.5137,121.3281" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="71.0273" x="20" y="1443.1055">Editor</text><ellipse cx="58.5137" cy="1457.2656" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M58.5137,1465.2656 L58.5137,1492.2656 M45.5137,1473.2656 L71.5137,1473.2656 M58.5137,1492.2656 L45.5137,1507.2656 M58.5137,1492.2656 L71.5137,1507.2656" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Handler"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="309.9404" x="353.7661" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="295.9404" x="360.7661" y="106.3682">InviteReviewerHandler</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="126.6357" x="445.4185" y="136.6338">(MediatR)</text></g><g class="participant participant-tail" data-participant="Handler"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="309.9404" x="353.7661" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="295.9404" x="360.7661" y="1451.9619">InviteReviewerHandler</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="126.6357" x="445.4185" y="1482.2275">(MediatR)</text></g><g class="participant participant-head" data-participant="Validator"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="324.959" x="731.7065" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="310.959" x="738.7065" y="106.3682">InviteReviewerValidator</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.0195" x="778.1763" y="136.6338">(FluentValidation)</text></g><g class="participant participant-tail" data-participant="Validator"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="324.959" x="731.7065" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="310.959" x="738.7065" y="1451.9619">InviteReviewerValidator</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.0195" x="778.1763" y="1482.2275">(FluentValidation)</text></g><g class="participant participant-head" data-participant="Article"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="170.3936" x="1142.6655" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="83.4082" x="1186.1582" y="106.3682">Article</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1149.6655" y="136.6338">(Aggregate)</text></g><g class="participant participant-tail" data-participant="Article"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="170.3936" x="1142.6655" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="83.4082" x="1186.1582" y="1451.9619">Article</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1149.6655" y="1482.2275">(Aggregate)</text></g><g class="participant participant-head" data-participant="Invitation"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="230.6201" x="1381.0591" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="216.6201" x="1388.0591" y="106.3682">ReviewInvitation</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1418.1724" y="136.6338">(Aggregate)</text></g><g class="participant participant-tail" data-participant="Invitation"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="230.6201" x="1381.0591" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="216.6201" x="1388.0591" y="1451.9619">ReviewInvitation</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="156.3936" x="1418.1724" y="1482.2275">(Aggregate)</text></g><g class="participant participant-head" data-participant="Repository"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="153.4199" x="1697.6792" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="139.4199" x="1704.6792" y="106.3682">Repository</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1714.0483" y="136.6338">(EF Core)</text></g><g class="participant participant-tail" data-participant="Repository"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="153.4199" x="1697.6792" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="139.4199" x="1704.6792" y="1451.9619">Repository</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1714.0483" y="1482.2275">(EF Core)</text></g><g class="participant participant-head" data-participant="DbContext"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="246.7686" x="1919.0991" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.7686" x="1926.0991" y="106.3682">ReviewDbContext</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1982.1426" y="136.6338">(EF Core)</text></g><g class="participant participant-tail" data-participant="DbContext"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="246.7686" x="1919.0991" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="232.7686" x="1926.0991" y="1451.9619">ReviewDbContext</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="120.6816" x="1982.1426" y="1482.2275">(EF Core)</text></g><g class="participant participant-head" data-participant="PersonSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="267.5889" x="2251.8677" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="253.5889" x="2258.8677" y="106.3682">Auth.PersonService</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="88.6895" x="2341.3174" y="136.6338">(gRPC)</text></g><g class="participant participant-tail" data-participant="PersonSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="267.5889" x="2251.8677" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="253.5889" x="2258.8677" y="1451.9619">Auth.PersonService</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="88.6895" x="2341.3174" y="1482.2275">(gRPC)</text></g><g class="participant participant-head" data-participant="EmailSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="182.2256" x="2587.4565" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="168.2256" x="2594.4565" y="106.3682">EmailService</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="114.8291" x="2621.1548" y="136.6338">(Module)</text></g><g class="participant participant-tail" data-participant="EmailSvc"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="182.2256" x="2587.4565" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="168.2256" x="2594.4565" y="1451.9619">EmailService</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="114.8291" x="2621.1548" y="1482.2275">(Module)</text></g><g class="participant participant-head" data-participant="UrlHelper"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="136.9033" x="2837.6821" y="75.2344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="122.9033" x="2844.6821" y="106.3682">UrlHelper</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="96.7637" x="2857.752" y="136.6338">(Utility)</text></g><g class="participant participant-tail" data-participant="UrlHelper"><rect fill="#FFFFFF" height="74.5313" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="136.9033" x="2837.6821" y="1420.8281"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="122.9033" x="2844.6821" y="1451.9619">UrlHelper</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacing" textLength="96.7637" x="2857.752" y="1482.2275">(Utility)</text></g><g><title>InviteReviewerHandler</title><rect fill="#FFFFFF" height="1181.1875" style="stroke:#181818;stroke-width:1;" width="10" x="503.7363" y="222.6406"/></g><g class="message" data-participant-1="Client" data-participant-2="Handler"><polygon fill="#181818" points="491.7363,218.6406,501.7363,222.6406,491.7363,226.6406,495.7363,222.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="58.5137" x2="497.7363" y1="222.6406" y2="222.6406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="302.0273" x="65.5137" y="187.043">InviteReviewerCommand</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="426.2227" x="65.5137" y="214.9805">(ArticleId, UserId?, Email?, EditorId)</text></g><g class="message" data-participant-1="Handler" data-participant-2="Validator"><polygon fill="#181818" points="882.186,260.5781,892.186,264.5781,882.186,268.5781,886.186,264.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="888.186" y1="264.5781" y2="264.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="339.9023" x="520.7363" y="256.918">ValidateOrThrow(command)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3017.5854" x="0" y="299.5469"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="299.5469" y2="299.5469"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="302.5469" y2="302.5469"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="303.9453" x="1356.8201" y="282.5781"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="281.5898" x="1362.8201" y="308.8555">Load Article &amp; Editor</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1762.3892,358.4531,1772.3892,362.4531,1762.3892,366.4531,1766.3892,362.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="1768.3892" y1="362.4531" y2="362.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="391.875" x="520.7363" y="354.793">GetArticleByIdOrThrow(articleId)</text></g><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1762.3892,400.3906,1772.3892,404.3906,1762.3892,408.3906,1766.3892,404.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="1768.3892" y1="404.3906" y2="404.3906"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="435.9609" x="520.7363" y="396.7305">GetEditorByUserIdOrThrow(editorId)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3017.5854" x="0" y="439.3594"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="439.3594" y2="439.3594"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="442.3594" y2="442.3594"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="449.1406" x="1284.2224" y="422.3906"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="426.7852" x="1290.2224" y="448.668">Guard: Existing Open Invitation</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1762.3892,498.2656,1772.3892,502.2656,1762.3892,506.2656,1766.3892,502.2656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="1768.3892" y1="502.2656" y2="502.2656"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="319.3359" x="520.7363" y="494.6055">OpenInvitationExistsAsync</text></g><path d="M10,517.2656 L90.8945,517.2656 L90.8945,537.2031 L80.8945,547.2031 L10,547.2031 L10,517.2656" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="84.8125" style="stroke:#000000;stroke-width:1.5;" width="692.7065" x="10" y="517.2656"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="35.8945" x="25" y="540.543">alt</text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="591.4219" x="105.8945" y="541.543">[Guard fails: open invitation already exists]</text><g class="message" data-participant-1="Handler" data-participant-2="Client"><polygon fill="#181818" points="69.5137,590.0781,59.5137,594.0781,69.5137,598.0781,65.5137,594.0781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="63.5137" x2="502.7363" y1="594.0781" y2="594.0781"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="333.2109" x="75.5137" y="586.418">Error: open invitation exists</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3017.5854" x="0" y="636.0469"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="636.0469" y2="636.0469"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="639.0469" y2="639.0469"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="261.582" x="1378.0017" y="619.0781"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="239.2266" x="1384.0017" y="645.3555">Resolve Reviewer</text><path d="M304.7661,672.0156 L394.9067,672.0156 L394.9067,691.9531 L384.9067,701.9531 L304.7661,701.9531 L304.7661,672.0156" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="369.3125" style="stroke:#000000;stroke-width:1.5;" width="2263.6904" x="304.7661" y="672.0156"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="45.1406" x="319.7661" y="695.293">opt</text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="454.9102" x="409.9067" y="696.293">[Reviewer is User (UserId exists)]</text><g class="message" data-participant-1="Handler" data-participant-2="Repository"><polygon fill="#181818" points="1762.3892,744.8281,1772.3892,748.8281,1762.3892,752.8281,1766.3892,748.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="1768.3892" y1="748.8281" y2="748.8281"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="426.7148" x="520.7363" y="741.168">GetReviewerByUserIdAsync(userId)</text></g><path d="M314.7661,763.8281 L395.6606,763.8281 L395.6606,783.7656 L385.6606,793.7656 L314.7661,793.7656 L314.7661,763.8281" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="198.625" style="stroke:#000000;stroke-width:1.5;" width="2243.6904" x="314.7661" y="763.8281"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="35.8945" x="329.7661" y="787.1055">alt</text><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="235.5117" x="410.6606" y="788.1055">[Reviewer exists]</text><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1215.8623,836.6406,1225.8623,840.6406,1215.8623,844.6406,1219.8623,840.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="1221.8623" y1="840.6406" y2="840.6406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="301.9336" x="520.7363" y="832.9805">InviteReviewer(reviewer)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="314.7661" x2="2558.4565" y1="849.6406" y2="849.6406"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="287.168" x="319.7661" y="871.918">[Reviewer not found]</text><g class="message" data-participant-1="Handler" data-participant-2="PersonSvc"><polygon fill="#181818" points="2373.6621,908.5156,2383.6621,912.5156,2373.6621,916.5156,2377.6621,912.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="2379.6621" y1="912.5156" y2="912.5156"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="559.9336" x="520.7363" y="904.8555">GetPersonByUserIdAsync(userId) &#8594; personInfo</text></g><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1215.8623,950.4531,1225.8623,954.4531,1215.8623,958.4531,1219.8623,954.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="1221.8623" y1="954.4531" y2="954.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="325.0898" x="520.7363" y="946.793">InviteReviewer(personInfo)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="304.7661" x2="2568.4565" y1="970.4531" y2="970.4531"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="301.6406" x="309.7661" y="992.7305">[Reviewer is not User]</text><g class="message" data-participant-1="Handler" data-participant-2="Article"><polygon fill="#181818" points="1215.8623,1029.3281,1225.8623,1033.3281,1215.8623,1037.3281,1219.8623,1033.3281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="1221.8623" y1="1033.3281" y2="1033.3281"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="263.5898" x="520.7363" y="1025.668">InviteReviewer(email)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3017.5854" x="0" y="1075.2969"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="1075.2969" y2="1075.2969"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="1078.2969" y2="1078.2969"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="238.2617" x="1389.6619" y="1058.3281"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="215.9063" x="1395.6619" y="1084.6055">Notify Reviewer</text><g class="message" data-participant-1="Handler" data-participant-2="UrlHelper"><polygon fill="#181818" points="2894.1338,1134.2031,2904.1338,1138.2031,2894.1338,1142.2031,2898.1338,1138.2031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="2900.1338" y1="1138.2031" y2="1138.2031"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="684.0586" x="520.7363" y="1130.543">BuildConfirmationUrl(invitation.Token) &#8594; confirmationUrl</text></g><g class="message" data-participant-1="Handler" data-participant-2="EmailSvc"><polygon fill="#181818" points="2666.5693,1176.1406,2676.5693,1180.1406,2666.5693,1184.1406,2670.5693,1180.1406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="2672.5693" y1="1180.1406" y2="1180.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="594.0234" x="520.7363" y="1172.4805">SendEmailAsync(EmailMessage(confirmationUrl))</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3017.5854" x="0" y="1215.1094"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="1215.1094" y2="1215.1094"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="1218.1094" y2="1218.1094"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="116.3281" x="1450.6287" y="1198.1406"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="93.9727" x="1456.6287" y="1224.418">Persist</text><g class="message" data-participant-1="Handler" data-participant-2="DbContext"><polygon fill="#181818" points="2030.4834,1274.0156,2040.4834,1278.0156,2030.4834,1282.0156,2034.4834,1278.0156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="513.7363" x2="2036.4834" y1="1278.0156" y2="1278.0156"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="253.5586" x="520.7363" y="1270.3555">SaveChangesAsync()</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="3017.5854" x="0" y="1312.9844"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="1312.9844" y2="1312.9844"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="3017.5854" y1="1315.9844" y2="1315.9844"/><rect fill="#EEEEEE" height="35.9375" style="stroke:#000000;stroke-width:2;" width="152.7148" x="1432.4353" y="1296.0156"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacing" textLength="130.3594" x="1438.4353" y="1322.293">Response</text><g class="message" data-participant-1="Handler" data-participant-2="Client"><polygon fill="#181818" points="69.5137,1399.8281,59.5137,1403.8281,69.5137,1407.8281,65.5137,1403.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="63.5137" x2="507.7363" y1="1403.8281" y2="1403.8281"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="295.0195" x="75.5137" y="1368.2305">InviteReviewerResponse</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacing" textLength="357.3281" x="75.5137" y="1396.168">(ArticleId, InvitationId, Token)</text></g><!--SRC=[ZLRTRjis5BxNKnouG243Jf1bHOSPJOROiLe3oHeuJNUp6rOybedGf4PHIhnXjtk0FcAVP8UYVYWvA0e3Dl- -xtpdXuSk7eNAcM5xkCOjAwLDjBBtuc-4ypTHqMtIjnMfo9coy4y4q9zwIxC5Inypeql5brfg0t_iX4MthWr7uzSMaWv5_mQSTptd7UDSg0pEVmts5_gvNHyiVz7FdlZJJgIF2ei2VdgPTgJhtRjxD9L8yV8INYNdxXD5LbY9i5OLIOODLWAVqC09tEDV9QeKuLgmpF76opSdDpzFevJbLcW5PBq0tcmAASl26cQn0Bj3s4hz15joUySKbyu5fc0oiZ81uumK5eIgKNu36fKpI7M5ne5HaSm3ICrSE6PGCIauSp9cnD5eDbXeMVh574qX2kiSc95f3afRiHLfZO5ACC0z4_8qYbXgIUPI2h81h839YWjQcKGHnHacS9NdiiNTi0FPcS2hrTlaB4aems5TV72kqhuZyPwsZZOxVwhu5YbYTZETZB2VlKFw9NItH_X4KbBivyvz8aBoZgIsUgyrEHP8JPBaR7KsCdVbXfHsPwmP4_bLbXdCA8T7ycf1FWOEufNrYoFiID5TdujGrkfOrWPpNRZe7nepxPGCh19OQdCixVhBakuYFjj0MRSsm8rahPuj6iKal2RtjeRLUJrBVZdAgzElrNsL-d2LTdVQBFaw9IFPvcvvf6pbAgo5-Ka7kDMybCVEF1Zv0MNU554t8y235PAkGEX6KxCdbrtbpM5OEKkztzEMIuzFyfhFuA50i-Q_pRm-zriN_9fFtLqG5UMm9OoYbfcCz2KwRyVuaNgGqKznwWrDe-ZY0cxebdOLzhgXXukBa2p8z1pUessEBmvhtdAoLlBqUq3FlZXuhreiTYuvGUzBPlYS4avLwBh9nnnLMDBVaUQEzYThXkAgEAWqOj9wOjXI68ivQCSgWeiY3J9-0An1bEZE1XbfSaUYZD7c6Do0ADUr1nlNsggWFvDadTj-JgtOHG1Y7uS6Fmsj7iUkHRVHgnsBothieCx5paBdne2oJVEuykAsApiUb4KWdJenlGpq9esv-djMg_FJ5xN1j_- -rYrUKtAs-eT5zP1Q5aaOIgCeEdNEOlHZZFKhCeKkKR-xP-Omo5D0qr_lEInA8UbPLbjXzdNEQJFkA-3qatv4vJrDXwT2ngx7pEdLLBoU-b3LmrlwSy0oZ4SCKtylciOy4jatLE9a5Ixf2S_GLtrCmAOUSwqeT24qBEjXcDhZmqRKtoity_v67CTDw7y0]--></g></svg>