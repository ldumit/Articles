<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="760px" preserveAspectRatio="none" style="width:802px;height:760px;background:#FFFFFF;" version="1.1" viewBox="0 0 802 760" width="802px" zoomAndPan="magnify"><title>C4 Level 2 - User Synchronization Flow (UserCreated/UserUpdated)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="531.4463" x="128.2769" y="30.9951">C4 Level 2 - User Synchronization Flow (UserCreated/UserUpdated)</text><!--cluster Auth Service--><g class="cluster" data-entity="Auth Service" data-source-line="12" data-uid="ent0003" id="cluster_Auth Service"><path d="M8.5,229.7969 L126.0361,229.7969 A3.75,3.75 0 0 1 128.5361,232.2969 L135.5361,268.0938 L482.5,268.0938 A2.5,2.5 0 0 1 485,270.5938 L485,545.2969 A2.5,2.5 0 0 1 482.5,547.7969 L8.5,547.7969 A2.5,2.5 0 0 1 6,545.2969 L6,232.2969 A2.5,2.5 0 0 1 8.5,229.7969" fill="#F0F8FF" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="135.5361" y1="268.0938" y2="268.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100.5361" x="18" y="252.792">Auth Service</text></g><!--cluster Submission Service--><g class="cluster" data-entity="Submission Service" data-source-line="18" data-uid="ent0007" id="cluster_Submission Service"><path d="M511.5,411.7969 L682.083,411.7969 A3.75,3.75 0 0 1 684.583,414.2969 L691.583,450.0938 L792.5,450.0938 A2.5,2.5 0 0 1 795,452.5938 L795,709.2969 A2.5,2.5 0 0 1 792.5,711.7969 L511.5,711.7969 A2.5,2.5 0 0 1 509,709.2969 L509,414.2969 A2.5,2.5 0 0 1 511.5,411.7969" fill="#F9F0FF" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="509" x2="691.583" y1="450.0938" y2="450.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="153.583" x="521" y="434.792">Submission Service</text></g><!--entity SaveUser--><g class="entity" data-entity="SaveUser" data-source-line="13" data-uid="ent0004" id="entity_SaveUser"><rect fill="#F1F1F1" height="52.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="241.3652" x="22.5" y="280.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205.3652" x="40.5" y="311.792">Create/Update User Endpoint</text></g><!--entity EventPub--><g class="entity" data-entity="EventPub" data-source-line="14" data-uid="ent0005" id="entity_EventPub"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="256.8965" x="108.5" y="462.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="220.8965" x="126.5" y="493.792">UserCreated/Updated Publisher</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.6025" x="189.647" y="510.0889">(MassTransit)</text></g><!--entity GRPC--><g class="entity" data-entity="GRPC" data-source-line="15" data-uid="ent0006" id="entity_GRPC"><rect fill="#F1F1F1" height="52.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.7656" x="299" y="280.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.7656" x="317" y="311.792">gRPC: GetUserById</text></g><!--entity SyncHandler--><g class="entity" data-entity="SyncHandler" data-source-line="19" data-uid="ent0008" id="entity_SyncHandler"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191.7979" x="525" y="462.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.4111" x="552.6934" y="493.792">PersonSyncHandler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155.7979" x="543" y="510.0889">(Handles User Events)</text></g><!--entity Person--><g class="entity" data-entity="Person" data-source-line="20" data-uid="ent0009" id="entity_Person"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="254.2441" x="525" y="626.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.5439" x="628.3501" y="657.792">Person</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218.2441" x="543" y="674.0889">(Read Model - Display + Email)</text></g><!--entity Admin--><g class="entity" data-entity="Admin" data-source-line="10" data-uid="ent0002" id="entity_Admin"><ellipse cx="142.8027" cy="67.2969" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M142.8027,75.2969 L142.8027,102.2969 M129.8027,83.2969 L155.8027,83.2969 M142.8027,102.2969 L129.8027,117.2969 M142.8027,102.2969 L155.8027,117.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208.6055" x="38.5" y="139.792">Admin (creates/updates user)</text></g><!--entity MQ--><g class="entity" data-entity="MQ" data-source-line="23" data-uid="ent0010" id="entity_MQ"><path d="M236,631.7969 L381.8066,631.7969 C386.8066,631.7969 386.8066,661.0938 386.8066,661.0938 C386.8066,661.0938 386.8066,690.3906 381.8066,690.3906 L236,690.3906 C231,690.3906 231,661.0938 231,661.0938 C231,661.0938 231,631.7969 236,631.7969" fill="#E8FFF8" style="stroke:#181818;stroke-width:0.5;"/><path d="M381.8066,631.7969 C376.8066,631.7969 376.8066,661.0938 376.8066,661.0938 C376.8066,690.3906 381.8066,690.3906 381.8066,690.3906" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.5576" x="269.6245" y="657.792">RabbitMQ</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.8066" x="244" y="674.0889">(via MassTransit)</text></g><!--link Admin to SaveUser--><g class="link" data-entity-1="Admin" data-entity-2="SaveUser" data-source-line="26" data-uid="lnk11" id="link_Admin_SaveUser"><path d="M143,151.1769 C143,191.2869 143,242.3069 143,274.7169" fill="none" id="Admin-to-SaveUser" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="143,280.7169,147,271.7169,143,275.7169,139,271.7169,143,280.7169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.5801" x="152" y="201.8638">POST/PUT /users</text></g><!--link SaveUser to EventPub--><g class="link" data-entity-1="SaveUser" data-entity-2="EventPub" data-source-line="28" data-uid="lnk12" id="link_SaveUser_EventPub"><path d="M149.09,333.1469 C153.88,351.1169 161.35,375.5369 171,395.7969 C182.22,419.3569 194.7453,438.9754 208.1853,457.8954" fill="none" id="SaveUser-to-EventPub" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="211.66,462.7869,209.7089,453.1332,208.7644,458.7107,203.187,457.7661,211.66,462.7869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.5684" x="180" y="383.8638">Emits UserCreated/Updated</text></g><!--link EventPub to MQ--><g class="link" data-entity-1="EventPub" data-entity-2="MQ" data-source-line="29" data-uid="lnk13" id="link_EventPub_MQ"><path d="M251.92,531.8669 C265.02,561.3369 281.4223,598.2544 293.8323,626.1644" fill="none" id="EventPub-to-MQ" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="296.27,631.6469,296.2684,621.798,294.2385,627.0782,288.9584,625.0483,296.27,631.6469" style="stroke:#181818;stroke-width:1;"/></g><!--link MQ to SyncHandler--><g class="link" data-entity-1="MQ" data-entity-2="SyncHandler" data-source-line="31" data-uid="lnk14" id="link_MQ_SyncHandler"><path d="M334.56,631.5769 C356.27,609.1869 389.49,579.3669 425,563.7969 C449.64,552.9969 459.05,562.8769 485,555.7969 C507.26,549.7269 525.1647,543.1794 546.1747,534.1794" fill="none" id="MQ-to-SyncHandler" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="551.69,531.8169,541.842,531.6839,547.0939,533.7857,544.9921,539.0376,551.69,531.8169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.2349" x="434" y="584.8638">UserCreated/Updated event</text></g><!--link SyncHandler to GRPC--><g class="link" data-entity-1="SyncHandler" data-entity-2="GRPC" data-source-line="33" data-uid="lnk15" id="link_SyncHandler_GRPC"><path d="M596.66,462.7069 C574.14,433.4369 538.43,391.3269 500,362.7969 C484.34,351.1769 471.2705,343.6184 453.6905,335.3584" fill="none" id="SyncHandler-to-GRPC" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="448.26,332.8069,454.7047,340.2544,452.7854,334.9331,458.1067,333.0138,448.26,332.8069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.501" x="546" y="383.8638">Fetch user by ID</text></g><!--link GRPC to SyncHandler--><g class="link" data-entity-1="GRPC" data-entity-2="SyncHandler" data-source-line="34" data-uid="lnk16" id="link_GRPC_SyncHandler"><path d="M385.21,333.1569 C387.62,353.3669 394.39,380.6969 413,395.7969 C425.5,405.9369 469.9,398.2169 485,403.7969 C521.16,417.1569 552.315,438.3985 578.125,459.0485" fill="none" id="GRPC-to-SyncHandler" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="582.81,462.7969,578.2814,454.0509,578.9058,459.6732,573.2835,460.2976,582.81,462.7969" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.9468" x="422" y="383.8638">User DTO</text></g><!--link SyncHandler to Person--><g class="link" data-entity-1="SyncHandler" data-entity-2="Person" data-source-line="36" data-uid="lnk17" id="link_SyncHandler_Person"><path d="M627.42,531.8669 C632.74,559.6669 639.1419,593.0939 644.4619,620.8839" fill="none" id="SyncHandler-to-Person" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="645.59,626.7769,647.8265,617.1853,644.6499,621.8661,639.9691,618.6895,645.59,626.7769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.4331" x="648" y="584.8638">Upsert Person record</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="578.4707" x="104.7646" y="739.792">Triggered by Auth events &#8594; updates Person model in Submission service via gRPC</text><!--SRC=[RPFFZjCm4CRlVefHzx2jK5M4E9Gz89MsMLQYshP9Jy31ZMSJQnqds4wNWBZo03mYJyBOxfy0UuaSv_VDp3SpiOzIDzpm2lAwQcgDsgMkKmW6SyTreP3PCoBmWRVAPVZLpPGiT4KqvFH0qwDioKNz97K13rpPlhxXGlZxARk-N2gfqNKDGcrSMJFcfAFqyzVm0G-eu1MCOMVHGDhfl3Irbj-uaxM6HDLFCFIVvWQvGp7nvrqZ_7d4Sju4B3EoAD2WW7q7izQLG66ri_3xvoze0srXZSOIMzM2CaeDQRklfBLUJp4FCaSuI0x5TZrdZEUkDZ2OYOh8OHwIsyafL4k2qG2uXG0mrl3yaHT80fyyZU46S9MyJAP90jyPmCVeO1ABZtQNMZIrrEwp3vNo0_fRp_xbEBg5TRjNqfPeFkdXYbkR6QwjTACWNdg_H7YnTt03j-Xyb7VTdGZ4hVVrerTgpt-lu3TKyh7Ws30_alTS2nKInvCzbX-Q70leOHSj2RR81Qn2pyUmaBPHl8CNiAouL54PKL_QbnPRAcpBztlfLXjI-u7qlOQUhpPmjQIs9bF6hiEAi3YdyVZjkOjm0-lxD9kiTnbC_BmiO-Tl7ZnrZC1b9Lsqz4_FsHdoYjM6CSeTibpSalwvQOK5f9Gzq0lz54YHeClBi4P-O-yMBDm_7naMsVt_WOxRJ4X3Z3kzqnzT6_47]--></g></svg>