<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="649px" preserveAspectRatio="none" style="width:1940px;height:649px;background:#FFFFFF;" version="1.1" viewBox="0 0 1940 649" width="1940px" zoomAndPan="magnify"><title>C4 Level 3 - CreateUser Feature in Auth Microservice</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="418.5986" x="753.7007" y="30.9951">C4 Level 3 - CreateUser Feature in Auth Microservice</text><!--cluster API + Application Layer--><g class="cluster" data-entity="API + Application Layer" data-source-line="11" data-uid="ent0002" id="cluster_API + Application Layer"><path d="M8.5,59.2969 L211.3486,59.2969 A3.75,3.75 0 0 1 213.8486,61.7969 L220.8486,97.5938 L1085.5,97.5938 A2.5,2.5 0 0 1 1088,100.0938 L1088,590.7969 A2.5,2.5 0 0 1 1085.5,593.2969 L8.5,593.2969 A2.5,2.5 0 0 1 6,590.7969 L6,61.7969 A2.5,2.5 0 0 1 8.5,59.2969" fill="#F0F8FF" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="220.8486" y1="97.5938" y2="97.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="185.8486" x="18" y="82.292">API + Application Layer</text></g><!--cluster Domain Layer--><g class="cluster" data-entity="Domain Layer" data-source-line="21" data-uid="ent0009" id="cluster_Domain Layer"><path d="M1334.5,258.2969 L1460.3076,258.2969 A3.75,3.75 0 0 1 1462.8076,260.7969 L1469.8076,296.5938 L1708.5,296.5938 A2.5,2.5 0 0 1 1711,299.0938 L1711,598.7969 A2.5,2.5 0 0 1 1708.5,601.2969 L1334.5,601.2969 A2.5,2.5 0 0 1 1332,598.7969 L1332,260.7969 A2.5,2.5 0 0 1 1334.5,258.2969" fill="#F9F0FF" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1332" x2="1469.8076" y1="296.5938" y2="296.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="108.8076" x="1344" y="281.292">Domain Layer</text></g><!--cluster Persistence Layer--><g class="cluster" data-entity="Persistence Layer" data-source-line="28" data-uid="ent0013" id="cluster_Persistence Layer"><path d="M1737.5,457.2969 L1895.3408,457.2969 A3.75,3.75 0 0 1 1897.8408,459.7969 L1904.8408,495.5938 L1930.5,495.5938 A2.5,2.5 0 0 1 1933,498.0938 L1933,590.7969 A2.5,2.5 0 0 1 1930.5,593.2969 L1737.5,593.2969 A2.5,2.5 0 0 1 1735,590.7969 L1735,459.7969 A2.5,2.5 0 0 1 1737.5,457.2969" fill="#E8FFF8" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1735" x2="1904.8408" y1="495.5938" y2="495.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="140.8408" x="1747" y="480.292">Persistence Layer</text></g><!--cluster EmailService Module--><g class="cluster" data-entity="EmailService Module" data-source-line="33" data-uid="ent0015" id="cluster_EmailService Module"><path d="M1114.5,457.2969 L1295.6035,457.2969 A3.75,3.75 0 0 1 1298.1035,459.7969 L1305.1035,495.5938 L1305.5,495.5938 A2.5,2.5 0 0 1 1308,498.0938 L1308,590.7969 A2.5,2.5 0 0 1 1305.5,593.2969 L1114.5,593.2969 A2.5,2.5 0 0 1 1112,590.7969 L1112,459.7969 A2.5,2.5 0 0 1 1114.5,457.2969" fill="#FFF5F0" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1112" x2="1305.1035" y1="495.5938" y2="495.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="164.1035" x="1124" y="480.292">EmailService Module</text></g><!--entity Endpoint--><g class="entity" data-entity="Endpoint" data-source-line="12" data-uid="ent0003" id="entity_Endpoint"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.0459" x="489.5" y="110.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.0459" x="507.5" y="141.292">CreateUserEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9424" x="523.0518" y="157.5889">(FastEndpoints)</text></g><!--entity Command--><g class="entity" data-entity="Command" data-source-line="13" data-uid="ent0004" id="entity_Command"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186.6914" x="90.5" y="508.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150.6914" x="108.5" y="539.292">CreateUserCommand</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6807" x="125.0054" y="555.5889">(Command DTO)</text></g><!--entity Validator--><g class="entity" data-entity="Validator" data-source-line="14" data-uid="ent0005" id="entity_Validator"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.9482" x="164" y="309.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.9482" x="182" y="340.292">CreateUserValidator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.9336" x="190.5073" y="356.5889">(FluentValidation)</text></g><!--entity Response--><g class="entity" data-entity="Response" data-source-line="15" data-uid="ent0006" id="entity_Response"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182.6035" x="377.5" y="309.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.6035" x="395.5" y="340.292">CreateUserResponse</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.5928" x="412.0054" y="356.5889">(Response DTO)</text></g><!--entity UserManager--><g class="entity" data-entity="UserManager" data-source-line="16" data-uid="ent0007" id="entity_UserManager"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184.6475" x="595.5" y="309.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148.6475" x="613.5" y="340.292">UserManager&lt;User&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.2559" x="623.6958" y="356.5889">(ASP.NET Identity)</text></g><!--entity UserCreatedHandler--><g class="entity" data-entity="UserCreatedHandler" data-source-line="17" data-uid="ent0008" id="entity_UserCreatedHandler"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="256.0488" x="816" y="309.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="220.0488" x="834" y="340.292">SendConfirmationEmailHandler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.4463" x="860.3013" y="356.5889">(On UserCreated Event)</text></g><!--entity User--><g class="entity" data-entity="User" data-source-line="22" data-uid="ent0010" id="entity_User"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157.0098" x="1393.5" y="309.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="1456.0498" y="340.292">User</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.0098" x="1411.5" y="356.5889">(Aggregate Root)</text></g><!--entity Event--><g class="entity" data-entity="Event" data-source-line="23" data-uid="ent0011" id="entity_Event"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145.8057" x="1348" y="508.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.623" x="1377.0913" y="539.292">UserCreated</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.8057" x="1366" y="555.5889">(Domain Event)</text></g><!--entity VOs--><g class="entity" data-entity="VOs" data-source-line="24" data-uid="ent0012" id="entity_VOs"><rect fill="#F1F1F1" height="84.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164.7754" x="1529.5" y="500.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.5762" x="1563.0996" y="531.292">HonorificTitle,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.7754" x="1547.5" y="547.5889">ProfessionalProfile</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.8145" x="1592.4805" y="563.8857">(VOs)</text></g><!--entity ORM--><g class="entity" data-entity="ORM" data-source-line="29" data-uid="ent0014" id="entity_ORM"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165.5137" x="1751" y="508.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.8545" x="1770.3296" y="539.292">UserConfiguration</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.5137" x="1769" y="555.5889">(EF Core Mapping)</text></g><!--entity EmailService--><g class="entity" data-entity="EmailService" data-source-line="34" data-uid="ent0016" id="entity_EmailService"><rect fill="#F1F1F1" height="68.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162.5059" x="1128.5" y="508.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.7119" x="1162.397" y="539.292">IEmailService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.5059" x="1146.5" y="555.5889">(Monolith Module)</text></g><!--link Endpoint to Command--><g class="link" data-entity-1="Endpoint" data-entity-2="Command" data-source-line="38" data-uid="lnk17" id="link_Endpoint_Command"><path d="M489.41,151.0969 C359.06,160.9469 125.4,187.1369 74,250.2969 C9.64,329.3769 95.701,445.5739 147.671,503.7039" fill="none" id="Endpoint-to-Command" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="151.67,508.1769,148.6535,498.8013,148.3375,504.4494,142.6895,504.1334,151.67,508.1769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.5645" x="83" y="348.3638">receives</text></g><!--link Endpoint to Validator--><g class="link" data-entity-1="Endpoint" data-entity-2="Validator" data-source-line="39" data-uid="lnk18" id="link_Endpoint_Validator"><path d="M490.89,179.3769 C469.37,188.4369 446.59,198.6869 426,209.2969 C395.3,225.1169 387.81,229.8269 360,250.2969 C335.28,268.4869 313.6461,286.9491 293.4161,305.1891" fill="none" id="Endpoint-to-Validator" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="288.96,309.2069,298.3228,306.1509,292.6735,305.8587,292.9657,300.2094,288.96,309.2069" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.9697" x="435" y="230.3638">validates</text></g><!--link Validator to Command--><g class="link" data-entity-1="Validator" data-entity-2="Command" data-source-line="40" data-uid="lnk19" id="link_Validator_Command"><path d="M241.14,378.6669 C228.46,414.8569 210.4631,466.2341 197.8031,502.3841" fill="none" id="Validator-to-Command" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="195.82,508.0469,202.5699,500.8748,197.4726,503.3279,195.0195,498.2306,195.82,508.0469" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.541" x="240" y="429.3638">checks props</text></g><!--link Endpoint to UserManager--><g class="link" data-entity-1="Endpoint" data-entity-2="UserManager" data-source-line="41" data-uid="lnk20" id="link_Endpoint_UserManager"><path d="M607.11,179.6169 C614.41,188.9169 621.89,199.2169 628,209.2969 C647.55,241.5669 662.4158,275.7425 673.2958,303.4325" fill="none" id="Endpoint-to-UserManager" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="675.49,309.0169,675.9216,299.1775,673.6615,304.3632,668.4757,302.1031,675.49,309.0169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.1099" x="655" y="230.3638">persists user</text></g><!--link Endpoint to User--><g class="link" data-entity-1="Endpoint" data-entity-2="User" data-source-line="42" data-uid="lnk21" id="link_Endpoint_User"><path d="M666.83,156.1369 C751.65,166.7569 882.78,185.1469 995,209.2969 C1137.08,239.8769 1293.723,286.4777 1387.673,315.8277" fill="none" id="Endpoint-to-User" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1393.4,317.6169,1386.0022,311.1152,1388.6275,316.1259,1383.6167,318.7512,1393.4,317.6169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.709" x="1136" y="230.3638">invokes factory</text></g><!--link User to VOs--><g class="link" data-entity-1="User" data-entity-2="VOs" data-source-line="43" data-uid="lnk22" id="link_User_VOs"><path d="M1497.3,378.6069 C1504.38,388.1669 1512.04,398.6069 1519,408.2969 C1540.91,438.8069 1561.752,468.7187 1579.992,495.1487" fill="none" id="User-to-VOs" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1583.4,500.0869,1581.5802,490.4076,1580.56,495.9717,1574.9959,494.9516,1583.4,500.0869" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29.7832" x="1551" y="429.3638">uses</text></g><!--link User to Event--><g class="link" data-entity-1="User" data-entity-2="Event" data-source-line="44" data-uid="lnk23" id="link_User_Event"><path d="M1463.23,378.6669 C1453.86,414.8569 1440.6039,466.0884 1431.2439,502.2384" fill="none" id="User-to-Event" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1429.74,508.0469,1435.8682,500.3368,1430.9933,503.2065,1428.1236,498.3316,1429.74,508.0469" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.4668" x="1464" y="429.3638">raises</text></g><!--link Event to UserCreatedHandler--><g class="link" data-entity-1="Event" data-entity-2="UserCreatedHandler" data-source-line="45" data-uid="lnk24" id="link_Event_UserCreatedHandler"><path d="M1386.87,508.0669 C1365.64,488.6469 1336.96,465.0369 1308,449.2969 C1234.64,409.4169 1150.3461,384.6928 1078.1061,368.5828" fill="none" id="Event-to-UserCreatedHandler" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1072.25,367.2769,1080.1636,373.1399,1077.1301,368.3652,1081.9049,365.3317,1072.25,367.2769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.6362" x="1298" y="429.3638">handled by</text></g><!--link Endpoint to UserCreatedHandler--><g class="link" data-entity-1="Endpoint" data-entity-2="UserCreatedHandler" data-source-line="46" data-uid="lnk25" id="link_Endpoint_UserCreatedHandler"><path d="M666.87,172.4069 C695.69,182.4169 727.34,194.9069 755,209.2969 C809.53,237.6669 861.6914,276.0755 898.6114,305.3955" fill="none" id="Endpoint-to-UserCreatedHandler" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="903.31,309.1269,898.7497,300.3974,899.3945,306.0174,893.7745,306.6622,903.31,309.1269" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.7671" x="818" y="230.3638">publishes event &#171;async&#187;</text></g><!--link User to ORM--><g class="link" data-entity-1="User" data-entity-2="ORM" data-source-line="47" data-uid="lnk26" id="link_User_ORM"><path d="M1550.66,373.8169 C1598.39,392.7169 1659.77,419.3869 1711,449.2969 C1740.42,466.4769 1766.3644,485.7267 1789.7044,504.4967" fill="none" id="User-to-ORM" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1794.38,508.2569,1789.8733,499.4996,1790.4836,505.1234,1784.8598,505.7338,1794.38,508.2569" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.9204" x="1701" y="429.3638">mapped with EF</text></g><!--link UserCreatedHandler to EmailService--><g class="link" data-entity-1="UserCreatedHandler" data-entity-2="EmailService" data-source-line="48" data-uid="lnk27" id="link_UserCreatedHandler_EmailService"><path d="M990.87,378.4369 C1019.12,398.7969 1055.75,425.3769 1088,449.2969 C1114.04,468.6169 1138.1986,486.8891 1161.3486,504.5391" fill="none" id="UserCreatedHandler-to-EmailService" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1166.12,508.1769,1161.3881,499.5392,1162.1438,505.1454,1156.5377,505.9011,1166.12,508.1769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.019" x="1085" y="429.3638">sends email</text></g><!--link Endpoint to Response--><g class="link" data-entity-1="Endpoint" data-entity-2="Response" data-source-line="49" data-uid="lnk28" id="link_Endpoint_Response"><path d="M548.18,179.5069 C540.74,188.7969 533.14,199.1269 527,209.2969 C507.54,241.5269 493.1767,275.8452 482.8267,303.5952" fill="none" id="Endpoint-to-Response" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="480.73,309.2169,487.6229,302.1821,482.4773,304.5321,480.1273,299.3865,480.73,309.2169" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.3521" x="536" y="230.3638">returns DTO</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="584.459" x="670.7705" y="629.292">Shows internal components and interactions of CreateUser within the Auth service.</text><!--SRC=[TLJVQzim47xtNt5q3ztO6WhRe2kb4DAO5feb95bVrZseyiKMaIKXoUd2sF- -asJ7Jhk-cFFfk- -xNvBR2cMOPJLmNHkjKFcLtqi4YzmpLKhCt05Iu8Orqg_njnzBKQgQqC3fWpOxxM5IAFHxWw2jh_GWtbMiqCz2bR1XqWsP3IkAuB_8CYyyoK- -m3tkKC9dE8E9HURnXqCBELcDHH0AneslO2QurNIm4nmppemNMi6gqi-E89INOhAlp05JHV8p7f0Ez6R8_YnyHSo-miJU4e-ox1J6Yplu26DZfE0iojopFHLk6D-o4k7a3S09lClFyuiyXpyPmCzURQeAeocPH_K-Pyvtl-x3Bs0Ekj_Zc8ckQwg1GbeBRjRp5D0wZl4FJ8g2UMs3Y6oe1ws7qajX1yHnu18TzSmXnNLcBzLvGaW0pvYY3jYhO5zJn7Yr67sVhk6k847XzobgW0o1ArJ5HAkDi7LCPrep8M-f0eaXsxcA0IcZ0gOxekfvMdSBp_w60TreOdWrbQ4tZE8R3QCTHI0AsPQbnPBeOAdrGAE3j5g4RBa6kKGp06-rqbPi15-7zVtqg1PMRz0vAep9O0iPUlamRyTBHifwWTO9vr5nV9dwgoFAVqgBb5_q-SSEbesDBII1QKwBGFTZneoX2vN4vijP4eizNgMbXfak6hhU1xd_78Q6vVdN_3m9tWqX93QZegK8jp2YsvOCC4brYJAcvofXNDOjDfoTNNTB2vVXlK6nmnVdX-qan2xP1EcznnoyGhvrOAn-gJFOFSAPr5W7JHZpAo0XXDhfBJfwfpZ9xBFeZWdD7HrJdEjzSGb22Km4V_hjo8utbL1Lj0fuslVAez4RODCyIU4goWGZwzKLStl5hwzxTHek0MkQDv661mocUVOVifZfSCINzBofWfY3yxWBXoiVvaBlBJsKTFd_0G00]--></g></svg>